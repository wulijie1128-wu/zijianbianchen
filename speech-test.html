<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speech Test</title>
</head>
<body>
    <h1>è¯­éŸ³åˆæˆæµ‹è¯•</h1>
    <button onclick="testSpeech()">ğŸ”Š æµ‹è¯•è¯­éŸ³</button>
    <button onclick="speakWord()">ğŸ—£ï¸ è¯´ "Hello"</button>
    <button onclick="speakCat()">ğŸ± è¯´ "Cat"</button>

    <div id="status" style="margin-top: 20px; padding: 10px; background: #f0f0f0;"></div>

    <script>
        function updateStatus(message) {
            document.getElementById('status').innerHTML += message + '<br>';
            console.log(message);
        }

        function testSpeech() {
            updateStatus('=== å¼€å§‹æµ‹è¯•è¯­éŸ³åˆæˆ ===');

            if ('speechSynthesis' in window) {
                updateStatus('âœ… æµè§ˆå™¨æ”¯æŒè¯­éŸ³åˆæˆ');

                const voices = speechSynthesis.getVoices();
                updateStatus(`å¯ç”¨è¯­éŸ³æ•°é‡: ${voices.length}`);

                if (voices.length === 0) {
                    updateStatus('âš ï¸ è¯­éŸ³è¿˜æœªåŠ è½½ï¼Œç­‰å¾…ä¸­...');
                    speechSynthesis.onvoiceschanged = () => {
                        const newVoices = speechSynthesis.getVoices();
                        updateStatus(`è¯­éŸ³åŠ è½½å®Œæˆï¼Œæ•°é‡: ${newVoices.length}`);
                        listVoices();
                    };
                } else {
                    listVoices();
                }
            } else {
                updateStatus('âŒ æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆ');
            }
        }

        function listVoices() {
            const voices = speechSynthesis.getVoices();
            const englishVoices = voices.filter(voice => voice.lang.startsWith('en'));
            updateStatus(`è‹±è¯­è¯­éŸ³æ•°é‡: ${englishVoices.length}`);

            if (englishVoices.length > 0) {
                updateStatus('å¯ç”¨çš„è‹±è¯­è¯­éŸ³:');
                englishVoices.forEach((voice, index) => {
                    updateStatus(`${index + 1}. ${voice.name} (${voice.lang})`);
                });
            }
        }

        function speakWord() {
            updateStatus('å°è¯•è¯´ "Hello"...');
            const utterance = new SpeechSynthesisUtterance('Hello');

            utterance.onstart = () => updateStatus('âœ… å¼€å§‹æ’­æ”¾: Hello');
            utterance.onend = () => updateStatus('âœ… æ’­æ”¾ç»“æŸ: Hello');
            utterance.onerror = (e) => updateStatus(`âŒ æ’­æ”¾å‡ºé”™: ${e.error}`);

            utterance.rate = 0.8;
            utterance.pitch = 1.0;
            utterance.volume = 1.0;
            utterance.lang = 'en-US';

            speechSynthesis.speak(utterance);
        }

        function speakCat() {
            updateStatus('å°è¯•è¯´ "Cat"...');
            const utterance = new SpeechSynthesisUtterance('cat');

            utterance.onstart = () => updateStatus('âœ… å¼€å§‹æ’­æ”¾: Cat');
            utterance.onend = () => updateStatus('âœ… æ’­æ”¾ç»“æŸ: Cat');
            utterance.onerror = (e) => updateStatus(`âŒ æ’­æ”¾å‡ºé”™: ${e.error}`);

            utterance.rate = 0.7;
            utterance.pitch = 1.0;
            utterance.volume = 1.0;
            utterance.lang = 'en-US';

            speechSynthesis.speak(utterance);
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•
        window.addEventListener('load', () => {
            setTimeout(testSpeech, 1000);
        });
    </script>
</body>
</html>